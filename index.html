<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b5ed7">
  <title>TurnApp ‚Äî Gesti√≥n Inteligente de Turnos de Trabajo</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="app.css">
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
</head>
<body class="light">
  <!-- Pantalla inicial / Splash -->
  <div id="splash" class="splash">
    <div class="logo-wrap">
      <img src="logo.svg" alt="TurnApp logo" class="logo-img" id="splash-logo">
    </div>
    <h1 class="slogan">Gesti√≥n Inteligente de Turnos de Trabajo</h1>
  </div>
  <!-- App principal -->
  <main id="app" class="oculto">
    <header class="app-header">
      <h2 id="app-title">TurnApp</h2>
      <button id="btn-toggle-theme" class="icon-btn" aria-label="Cambiar tema">üåì</button>
    </header>
    <!-- ========= PANEL 1: TURNOS (Calendario Principal) ========= -->
    <section id="content" class="content panel">
      <p>Bienvenido a <strong>TurnApp</strong></p>
      
      <div style="margin-top:12px; margin-bottom:25px; text-align:center;">
        <button id="btn-apply-cadence" class="modern-btn green">Aplicar cadencia</button>
        <button id="btn-clear-cadence" class="modern-btn red">Limpiar cadencia</button>
      </div>
      
      <div class="calendar-controls">
        <button id="prevMonth">‚óÄ Anterior</button>
        <span id="monthLabel"></span>
        <button id="nextMonth">Siguiente ‚ñ∂</button>
      </div>
      <div id="calendar-weekdays">
        <div>LUN</div><div>MAR</div><div>MI√â</div><div>JUE</div><div>VIE</div><div>S√ÅB</div><div>DOM</div>
      </div>
      
      <section id="calendar-panel">
        <div id="calendar"></div>
      </section>
      <div class="main-actions">
        <button id="btn-carga-dias" class="modern-btn">Carga d√≠as</button>
        <button id="btn-copy-grid" class="modern-btn green">Copiar tabla</button>
      </div>
      
      <div id="toast-notification" class="toast">¬°Tabla copiada al portapapeles!</div>
    </section>
    <!-- ========= PANEL 2: PETICIONES (Ajustes) ========= -->
    <section id="ajustes-section" class="panel oculto">
      <h2>Peticiones</h2>
      <div id="peticiones-container">
        <p>Aqu√≠ se gestionar√°n las peticiones del usuario.</p>
        <button class="modern-btn" onclick="switchPanel('turnos')">Volver al Calendario</button>
      </div>
    </section>
    <!-- ========= PANEL 3: TABL√ìN DE ANUNCIOS ========= -->
    <section id="tablon-section" class="panel oculto">
      <h2>Tabl√≥n de Anuncios</h2>
      <input type="file" id="file-input" style="display: none;">
      <button id="btn-upload-file" class="modern-btn">
          <span class="icon-upload">+</span> Subir Archivo
      </button>
      <div id="tablon-list"></div>
    </section>
    
    <!-- ========= PANEL 4: CARGA DE D√çAS (Licencias) - ¬°MOVIDO AQU√ç! ========= -->
    <section id="carga-dias-section" class="panel oculto">
        <div id="licencias-container" class="licencias" aria-hidden="false" style="margin-top:20px;">
          <h3>Gesti√≥n de Permisos y Licencias</h3>
          <div class="licencia-item" data-tipo="vacaciones"><label class="licencia-nombre">Vacaciones: V</label><input type="number" min="0" class="cantidad-input licencia-cantidad" value="0"><button type="button" class="licencia-color-handle licencia-color" title="Elegir color">‚óè</button></div>
          <div class="licencia-item" data-tipo="compfest"><label class="licencia-nombre">Compensaci√≥n de Festivos: CF</label><input type="number" min="0" class="cantidad-input licencia-cantidad" value="0"><button type="button" class="licencia-color-handle licencia-color" title="Elegir color">‚óè</button></div>
          <div class="licencia-item" data-tipo="asuntos"><label class="licencia-nombre">Asuntos Propios: AP</label><input type="number" min="0" class="cantidad-input licencia-cantidad" value="0"><button type="button" class="licencia-color-handle licencia-color" title="Elegir color">‚óè</button></div>
          <!-- ... m√°s items de licencias -->
          <div id="coordinador-container" class="coordinador-container">
            <h3>Tabla del Coordinador</h3>
            <table id="coordinador-table">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Color</th>
                </tr>
              </thead>
              <tbody>
                <!-- Las filas se a√±aden din√°micamente -->
              </tbody>
            </table>
            <button id="add-row-btn" class="modern-btn small-btn">(+) Fila</button>
            <button id="remove-row-btn" class="modern-btn small-btn red">(-) Fila</button>
          </div>
          
          <button id="btn-volver-calendario" class="modern-btn" style="margin-top: 20px;">Volver al Calendario</button>
        </div>
    </section>
    <nav class="app-nav">
      <button class="nav-btn active" data-section="turnos">Turnos</button>
      <button class="nav-btn" data-section="peticiones">Peticiones</button>
      <button class="nav-btn" data-section="tablon">Tabl√≥n</button>
    </nav>
  </main>
  <!-- Scripts al final para un rendimiento √≥ptimo -->
  <script src="https-unpkg.com-papaparse@5.4.1.min.js"></script>
  <script src="app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- ELEMENTOS Y PANELES ---
        const appContainer = document.getElementById('app');
        const mainContent = document.getElementById('content');
        const ajustesSection = document.getElementById('ajustes-section');
        const tablonSection = document.getElementById('tablon-section');
        const cargaDiasSection = document.getElementById('carga-dias-section'); // <-- NUEVO
        
        const navButtons = document.querySelectorAll('.nav-btn');
        const btnCargaDias = document.getElementById('btn-carga-dias');
        const btnVolverCalendario = document.getElementById('btn-volver-calendario'); // <-- NUEVO
        // --- L√ìGICA DE NAVEGACI√ìN ---
        function switchPanel(targetSection) {
            mainContent.classList.add('oculto');
            ajustesSection.classList.add('oculto');
            tablonSection.classList.add('oculto');
            cargaDiasSection.classList.add('oculto'); // <-- NUEVO
            navButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.section === targetSection);
            });
            let targetPanel;
            if (targetSection === 'turnos') targetPanel = mainContent;
            else if (targetSection === 'peticiones') targetPanel = ajustesSection;
            else if (targetSection === 'tablon') targetPanel = tablonSection;
            else if (targetSection === 'carga-dias') targetPanel = cargaDiasSection; // <-- NUEVO
            if (targetPanel) targetPanel.classList.remove('oculto');
            
            appContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        navButtons.forEach(button => {
            button.addEventListener('click', () => switchPanel(button.dataset.section));
        });
        // --- EVENTOS DE BOTONES ESPECIALES ---
        btnCargaDias.addEventListener('click', () => switchPanel('carga-dias'));
        btnVolverCalendario.addEventListener('click', () => switchPanel('turnos'));
        
        // La vista inicial se gestiona desde app.js al hacer clic en el logo
    });
  </script>
</body>
</html>